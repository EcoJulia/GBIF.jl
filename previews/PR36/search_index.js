var documenterSearchIndex = {"docs":
[{"location":"data/#Retrieving-data","page":"Getting data","title":"Retrieving data","text":"","category":"section"},{"location":"data/#Getting-taxonomic-information","page":"Getting data","title":"Getting taxonomic information","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"taxon","category":"page"},{"location":"data/#GBIF.taxon","page":"Getting data","title":"GBIF.taxon","text":"Get information about a taxon at any level\n\ntaxon(name::String)\n\nThis function will look for a taxon by its (scientific) name in the GBIF reference taxonomy.\n\nOptional arguments are\n\nrank::Union{Symbol,Nothing}=:SPECIES – the rank of the taxon you want. This is part of a controlled vocabulary, and can only be one of :DOMAIN, :CLASS, :CULTIVAR, :FAMILY, :FORM, :GENUS, :INFORMAL, :ORDER, :PHYLUM,, :SECTION, :SUBCLASS, :VARIETY, :TRIBE, :KINGDOM, :SUBFAMILY, :SUBFORM, :SUBGENUS, :SUBKINGDOM, :SUBORDER, :SUBPHYLUM, :SUBSECTION, :SUBSPECIES, :SUBTRIBE, :SUBVARIETY, :SUPERCLASS, :SUPERFAMILY, :SUPERORDER, and :SPECIES\nstrict::Bool=true – whether the match should be strict, or fuzzy\n\nFinally, one can also specify other levels of the taxonomy, using  kingdom, phylum, class, order, family, and genus, all of which can either be String or Nothing.\n\nIf a match is found, the result will be given as a GBIFTaxon. If not, this function will return nothing and give a warning.\n\n\n\n\n\nGet information about a taxon at any level using taxonID\n\ntaxon(id::Int)\n\nThis function will look for a taxon by its taxonID in the GBIF reference taxonomy.\n\n\n\n\n\n","category":"function"},{"location":"data/#Getting-occurrence-data","page":"Getting data","title":"Getting occurrence data","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"The most common task is to retrieve a number of occurrences. The core type of this package is GBIFRecord, which stores a number of data and metadata associated with observations of occurrences.","category":"page"},{"location":"data/#Single-occurrence","page":"Getting data","title":"Single occurrence","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"occurrence","category":"page"},{"location":"data/#GBIF.occurrence","page":"Getting data","title":"GBIF.occurrence","text":"Return an interpreted occurrence given its key\n\noccurrence(key::Union{String, Integer})\n\nThe key can be given as a string or as an integer.\n\n\n\n\n\n","category":"function"},{"location":"data/","page":"Getting data","title":"Getting data","text":"This can be used to retrieve occurrence 1258202889, with","category":"page"},{"location":"data/","page":"Getting data","title":"Getting data","text":"using GBIF\noccurrence(1258202889)","category":"page"},{"location":"data/#Multiple-occurrences","page":"Getting data","title":"Multiple occurrences","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"occurrences()\noccurrences(t::GBIFTaxon)","category":"page"},{"location":"data/#GBIF.occurrences-Tuple{}","page":"Getting data","title":"GBIF.occurrences","text":"Retrieve latest occurrences based on a query\n\noccurrences(query::Pair...)\n\nThis function will return the latest occurrences matching the queries – usually 20, but this is entirely determined by the server default page size. The query parametes must be given as pairs, and are optional. Omitting the query will return the latest recorded occurrences.\n\n\n\n\n\n","category":"method"},{"location":"data/#GBIF.occurrences-Tuple{GBIFTaxon}","page":"Getting data","title":"GBIF.occurrences","text":"Retrieve latest occurrences for a taxon based on a query\n\noccurrences(t::GBIFTaxon, query::Pair...)\n\nReturns occurrences that correspond to a filter, given in q as a dictionary. When first called, this function will return the latest 20 hits (or whichever default page size GBIF uses). Future occurrences can be queried with next! or complete!.\n\n\n\n\n\n","category":"method"},{"location":"data/","page":"Getting data","title":"Getting data","text":"When called with no arguments, this function will return a list of the latest 20 occurrences recorded in GBIF. Note that the GBIFRecords type, returned by occurrences, implements all the necessary methods to iterate over collections. For example, this allows writing the following:","category":"page"},{"location":"data/","page":"Getting data","title":"Getting data","text":"using GBIF\no = occurrences()\nfor single_occ in o\n  print(single_occ)\nend","category":"page"},{"location":"data/#Query-parameters","page":"Getting data","title":"Query parameters","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"occurrences(query::Pair...)\noccurrences(t::GBIFTaxon, query::Pair...)","category":"page"},{"location":"data/#GBIF.occurrences-Tuple{Vararg{Pair,N} where N}","page":"Getting data","title":"GBIF.occurrences","text":"Retrieve latest occurrences based on a query\n\noccurrences(query::Pair...)\n\nThis function will return the latest occurrences matching the queries – usually 20, but this is entirely determined by the server default page size. The query parametes must be given as pairs, and are optional. Omitting the query will return the latest recorded occurrences.\n\n\n\n\n\n","category":"method"},{"location":"data/#GBIF.occurrences-Tuple{GBIFTaxon,Vararg{Pair,N} where N}","page":"Getting data","title":"GBIF.occurrences","text":"Retrieve latest occurrences for a taxon based on a query\n\noccurrences(t::GBIFTaxon, query::Pair...)\n\nReturns occurrences that correspond to a filter, given in q as a dictionary. When first called, this function will return the latest 20 hits (or whichever default page size GBIF uses). Future occurrences can be queried with next! or complete!.\n\n\n\n\n\n","category":"method"},{"location":"data/","page":"Getting data","title":"Getting data","text":"For example, we can get the data on observations of bats between -30 and 30 of latitudes using the following syntax:","category":"page"},{"location":"data/","page":"Getting data","title":"Getting data","text":"using GBIF\nbats = GBIF.taxon(\"Chiroptera\"; strict=false)\nfor occ in occurrences(bats, \"decimalLatitude\" => (-30.0, 30.0))\n  println(\"$(occ.scientific) -- latitude = $(occ.latitude)\")\nend","category":"page"},{"location":"data/#Batch-download-of-occurrences","page":"Getting data","title":"Batch-download of occurrences","text":"","category":"section"},{"location":"data/","page":"Getting data","title":"Getting data","text":"occurrences!","category":"page"},{"location":"data/#GBIF.occurrences!","page":"Getting data","title":"GBIF.occurrences!","text":"Get the next page of results\n\nThis function will retrieve the next page of results. By default, it will walk through queries 20 at a time. This can be modified by changing the .query[\"limit\"] value, to any value up to 300, which is the limit set by GBIF for the queries.\n\nIf filters have been applied to this query before, they will be removed to ensure that the previous and the new occurrences have the same status, but only for records that have already been retrieved.\n\n\n\n\n\n","category":"function"},{"location":"data/","page":"Getting data","title":"Getting data","text":"using GBIF\ncan_most_recent = occurrences(\"hasCoordinate\" => true, \"country\" => \"CA\")\noccurrences!(can_most_recent)","category":"page"},{"location":"examples/bats/#Rank-abundance-curves-of-bats-in-Europe","page":"Bats rank-abundance","title":"Rank-abundance curves of bats in Europe","text":"","category":"section"},{"location":"examples/bats/","page":"Bats rank-abundance","title":"Bats rank-abundance","text":"In this example, we will use the GBIF package to produce a rank-abundance curve of Chiroptera species in Europe, based on data from 2000 to 2005.","category":"page"},{"location":"examples/bats/","page":"Bats rank-abundance","title":"Bats rank-abundance","text":"using GBIF\nusing DataFrames\nusing Query\nusing StatsPlots\n\nbats = GBIF.taxon(\"Chiroptera\"; strict=false)\nocc = occurrences(bats, \"continent\" => \"EUROPE\", \"year\" => (2000, 2005), \"limit\" => 300)\nwhile length(occ) < size(occ)\noccurrences!(occ)\nend","category":"page"},{"location":"examples/bats/","page":"Bats rank-abundance","title":"Bats rank-abundance","text":"by_country = occ |>\n  @filter(_.rank == \"SPECIES\") |>\n  @map({_.key, _.country, species=_.taxon.name}) |>\n  @filter(!ismissing(_.species)) |>\n  @filter(!ismissing(_.country)) |>\n  @groupby((_.country, _.species)) |>\n  @map({country = first(unique(_.country)), species = first(unique(_.species)), count = length(_)}) |>\n  @groupby(_.country) |>\n  @map({country = key(_), abundance = sort(_.count, rev=true), rank = 1:length(_)}) |>\n  @filter(length(_.abundance) > 5) |>\n  DataFrame |>\n  (d) -> flatten(d, [:abundance, :rank]) |>\n  (d) -> sort(d, :rank)\n\ntheme(:wong)\n@df by_country plot(:rank, :abundance, group = :country, m=:circle, legend=:outertopright)\nxaxis!(\"Rank\", :log)\nyaxis!(\"Observations\", :log)","category":"page"},{"location":"#Access-GBIF-data-with-Julia","page":"Home","title":"Access GBIF data with Julia","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package offers access to biodiversity data through the Global Biodiversity Information Facility (GBIF) API. The package currently supports access to occurrence information, and limited support for taxonomic information.","category":"page"},{"location":"#Getting-started","page":"Home","title":"Getting started","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The package can be installed from the Julia console:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Pkg.add(\"GBIF\")","category":"page"},{"location":"","page":"Home","title":"Home","text":"After installing it, load the package as usual:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using GBIF","category":"page"},{"location":"#Core-features","page":"Home","title":"Core features","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This package is a wrapper around the \"search\" API for occurrences, as well as the taxonomy API of GBIF. The core functions are occurrences and taxon. In previous releases of the package, there were a number a data cleaning routines - because the Julia ecosystem has powerful packages to do this, they have been removed, and we suggest to use either Query.jl directly, or to access a subset of the information through the integration with DataFrames.jl.","category":"page"},{"location":"examples/cardinal/#Observations-of-Northern-Cardinal-over-time","page":"Northern cardinal","title":"Observations of Northern Cardinal over time","text":"","category":"section"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"In this example, we will look at the number of observations of the Cardinalis cardinalis observed in Québec in 2012 and 2013, sort the observations by date, and compare the number of observations over the two years. This will showcase the integration of the package with Query.jl.","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"using GBIF\nusing DataFrames\nusing Query\nusing StatsPlots\nusing Dates","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"We can get the taxonomic object for Cardinalis cardinalis:","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"sp_code = taxon(\"Cardinalis cardinalis\", rank = :SPECIES)","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"With this object created, we can define a rough bounding box for Québec, and start defining our query:","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"lat, lon = (44.0, 62.0), (-80.0, -56.0)\n\nobs_qc = occurrences(\n    sp_code,\n    \"limit\" => 300,\n    \"hasCoordinate\" => \"true\",\n    \"decimalLatitude\" => lat,\n    \"decimalLongitude\" => lon,\n    \"year\" => (2012, 2013)\n)","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"Because the query parameters are going to remain within the obs_qc variable, all we need to do is call occurrences! on this variable until all occurrences (of which there are size(obs_qc)) are retrieved.","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"while length(obs_qc) < size(obs_qc)\n    occurrences!(obs_qc)\nend","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"At the end of this loop, the obs_qc object will have all of the occurrences. It is directly iterable, so we do not need to do anything specific to use it in a for loop - but if we want to get an array of GBIFRecord, we can use collect(view(obs_qc)).","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"The next step is to actually convert the data into a form where we can plot them, and this showcases how the package can be used with Query:","category":"page"},{"location":"examples/cardinal/","page":"Northern cardinal","title":"Northern cardinal","text":"d = obs_qc |>\n  @filter(_.rank == \"SPECIES\") |>\n  @filter(_.country == \"Canada\") |>\n  @map({_.key, year=year(_.date), month=month(_.date)}) |>\n  @groupby((_.year, _.month)) |>\n  @map({year = first(unique(_.year)), month = first(unique(_.month)), obs = length(_)}) |>\n  @orderby(_.month) |>\n  @thenby(_.year) |>\n  DataFrame\n\n@df d plot(:month, :obs, group=:year)","category":"page"},{"location":"types/#Data-representation","page":"Types","title":"Data representation","text":"","category":"section"},{"location":"types/","page":"Types","title":"Types","text":"GBIFTaxon\nGBIFRecord\nGBIFRecords","category":"page"},{"location":"types/#GBIF.GBIFTaxon","page":"Types","title":"GBIF.GBIFTaxon","text":"Representation of a GBIF taxon\n\nAll taxonomic level fields can either be missing, or a pair linking the name of the taxon/level to its unique key in the GBIF database.\n\nname - the vernacular name of the taxon\n\nscientific - the accepted scientific name of the species\n\nstatus - the status of the taxon\n\nmatch - the type of match\n\nkingdom - a Pair linking the name of the kingdom to its unique ID\n\nphylum - a Pair linking the name of the phylum to its unique ID\n\nclass - a Pair linking the name of the class to its unique ID\n\norder - a Pair linking the name of the order to its unique ID\n\nfamily - a Pair linking the name of the family to its unique ID\n\ngenus - a Pair linking the name of the genus to its unique ID\n\nspecies - a Pair linking the name of the species to its unique ID\n\nconfidence - an Int64 to note the confidence in the match\n\nsynonym - a Boolean indicating whether the taxon is a synonym\n\n\n\n\n\n","category":"type"},{"location":"types/#GBIF.GBIFRecord","page":"Types","title":"GBIF.GBIFRecord","text":"Represents an occurrence in the GBIF format\n\nThis is currently a subset of all the fields. This struct is not mutable – this ensures that the objects returned from the GBIF database are never modified by the user.\n\nThe taxon field is a GBIFTaxon object, and can therefore be manipulated as any other GBIFTaxon.\n\n\n\n\n\n","category":"type"},{"location":"types/#GBIF.GBIFRecords","page":"Types","title":"GBIF.GBIFRecords","text":"List of occurrences and metadata\n\nThis type has actually very few information: the query field stores the query parameters. This type is mutable and fully iterable.\n\nThe occurrences field is pre-allocated, meaning that it will contain #undef elements up to the total number of hits on GBIF. When iterating, this is taken care of automatically, but this needs to be accounted for if writing code that accesses this field directly.\n\n\n\n\n\n","category":"type"}]
}
